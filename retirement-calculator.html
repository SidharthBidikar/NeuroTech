<!DOCTYPE html>
<html lang="en">
<head>
    <!-- User's Tracking and Ad Scripts -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2565993964252995" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-22X7NY7QJF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-22X7NY7QJF');
    </script>
    <meta name="google-site-verification" content="1j2lyC3ZbnmSQySbsIoQep4DWrnDkwLE2euIB_jOb-M" />
    <meta name="google-adsense-account" content="ca-pub-6275528006958350" />
    
    <!-- SEO Meta Tags for Retirement Calculator -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retirement Calculator - Plan Your Financial Future (India)</title>
    <meta name="description" content="A powerful and free online retirement calculator for India. Estimate your required corpus, see how your investments will grow, and plan for a comfortable retirement.">
    <meta name="keywords" content="retirement calculator, retirement planning calculator, pension calculator, how much to save for retirement, retirement corpus calculator, online retirement planning tool india">
    <meta name="robots" content="index, follow">
    <meta name="author" content="One Page Tools Team">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-domain.com/retirement-calculator.html">
    <meta property="og:title" content="Advanced Retirement Calculator - Plan Your Post-Retirement Life">
    <meta property="og:description" content="Use our comprehensive retirement calculator to determine your required corpus, accounting for inflation, current savings, and monthly investments.">
    <meta property="og:image" content="https://via.placeholder.com/1200x630.png?text=Retirement+Calculator">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://your-domain.com/retirement-calculator.html">
    <meta property="twitter:title" content="Advanced Retirement Calculator - Plan Your Post-Retirement Life">
    <meta property="twitter:description" content="Use our comprehensive retirement calculator to determine your required corpus, accounting for inflation, current savings, and monthly investments.">
    <meta property="twitter:image" content="https://via.placeholder.com/1200x630.png?text=Retirement+Calculator">

    <!-- Stylesheets -->
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
      body { font-family: 'Inter', sans-serif; background-color: #f5f5fa; }
      .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); transition: all 0.2s ease-in-out; }
      .article-section { max-width: 800px; margin: 4rem auto; padding: 2rem; background-color: white; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
      .article-section h2, .article-section h3, .article-section h4, .article-section p, .article-section li, .article-section strong, .article-section code { text-align: left; }
      .article-section h2 { font-size: 2rem; margin-bottom: 1rem; color: #1f2937; border-bottom: 2px solid #d1d5db; padding-bottom: 0.5rem; }
      .article-section h3 { font-size: 1.6rem; margin-top: 2.5rem; margin-bottom: 1rem; color: #111827; }
      .article-section h4 { font-size: 1.25rem; margin-top: 2rem; margin-bottom: 0.75rem; color: #1f2937; font-weight: 600; border-left: 3px solid #6366f1; padding-left: 0.75rem;}
      .article-section p, .article-section li { margin-bottom: 1rem; line-height: 1.8; color: #374151; }
      .article-section strong { color: #4f46e5; }
      .article-section code { background-color: #e5e7eb; padding: 0.2rem 0.4rem; border-radius: 4px; font-family: monospace; color:#1e293b; }
      .result-value.positive { color: #10b981; }
      .result-value.negative { color: #ef4444; }
    </style>
</head>
<body>
    <!-- HEADER FROM USER'S index.html -->
    <nav class="bg-white dark:bg-gray-900 fixed w-full z-20 top-0 start-0 border-b border-gray-200 dark:border-gray-600">
        <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
          <a href="https://onepagetools.com" class="flex items-center space-x-3 rtl:space-x-reverse">
            <img style="height: 60px" src="./One_Page-removebg-preview.png" alt="OnePageTools Logo" />
          </a>
          <div class="flex md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse">
            <button data-collapse-toggle="navbar-sticky" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-sticky" aria-expanded="false">
              <span class="sr-only">Open main menu</span>
              <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"></path></svg>
            </button>
          </div>
          <div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-sticky">
            <ul class="flex flex-col p-4 md:p-0 mt-4 font-medium border border-gray-100 rounded-lg bg-gray-50 md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
              <li><a href="./index.html" class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Home</a></li>
              <li><a href="./about.html" class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">About</a></li>
              <li><a href="./contact.html" class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">Contact</a></li>
              <li>
                <button id="dropdownNavbarLink" data-dropdown-toggle="dropdownNavbar" class="flex items-center justify-between w-full py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 md:w-auto dark:text-white md:dark:hover:text-blue-500 dark:focus:text-white dark:border-gray-700 dark:hover:bg-gray-700 md:dark:hover:bg-transparent">ALL PDF TOOLS<svg class="w-2.5 h-2.5 ms-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/></svg></button>
                <div id="dropdownNavbar" class="z-10 hidden font-normal bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700 dark:divide-gray-600">
                  <ul class="py-2 text-sm text-gray-700 dark:text-gray-400" aria-labelledby="dropdownLargeButton">
                    <li><a href="./pdftoword.html" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">PDF TO WORD</a></li>
                    <li><a href="./wordtopdf.html" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Word to PDF</a></li>
                  </ul>
                </div>
              </li>
              <li>
                <button id="textToolsDropdownLink" data-dropdown-toggle="textToolsDropdown" class="flex items-center justify-between w-full py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 md:w-auto dark:text-white md:dark:hover:text-blue-500 dark:focus:text-white dark:border-gray-700 dark:hover:bg-gray-700 md:dark:hover:bg-transparent">Text & Content Tools ✒️<svg class="w-2.5 h-2.5 ms-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/></svg></button>
                <div id="textToolsDropdown" class="z-10 hidden font-normal bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700 dark:divide-gray-600">
                  <ul class="py-2 text-sm text-gray-700 dark:text-gray-400" aria-labelledby="textToolsDropdownLink">
                    <li><a href="./textcaseconverter.html" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Text Case Converter</a></li>
                    <li><a href="./wordcounter.html" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Word Counter</a></li>
                  </ul>
                </div>
              </li>
              <li>
                <button id="calculatorToolsDropdownLink" data-dropdown-toggle="calculatorToolsDropdown" class="flex items-center justify-between w-full py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 md:w-auto dark:text-white md:dark:hover:text-blue-500 dark:focus:text-white dark:border-gray-700 dark:hover:bg-gray-700 md:dark:hover:bg-transparent">Calculators 🧮<svg class="w-2.5 h-2.5 ms-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/></svg></button>
                <div id="calculatorToolsDropdown" class="z-10 hidden font-normal bg-white divide-y divide-gray-100 rounded-lg shadow w-52 dark:bg-gray-700 dark:divide-gray-600">
                  <ul class="py-2 text-sm text-gray-700 dark:text-gray-400" aria-labelledby="calculatorToolsDropdownLink">
                    <li><a href="./age-calculator.html" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Age Calculator</a></li>
                    <li><a href="./speed-converter.html" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">Speed Converter</a></li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
    </nav>
    <!-- END OF HEADER -->
    
    <!-- Main Tool Content -->
    <main class="pt-24">
        <div class="flex flex-col justify-center items-center py-10 px-4">
            <div class="w-full max-w-7xl p-6 md:p-8 bg-white rounded-xl shadow-xl">
              <!-- Tool Header -->
              <div class="text-center mb-8">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-3">Retirement Calculator</h1>
                <p class="text-lg text-gray-500 max-w-3xl mx-auto">Plan for your golden years by estimating the retirement corpus you need and how to achieve it.</p>
              </div>
        
              <!-- Calculator Body -->
              <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Inputs -->
                <div class="lg:col-span-1 bg-gray-50 p-6 rounded-lg border border-gray-200">
                    <h3 class="text-xl font-bold text-gray-700 mb-6">Your Details</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="current-age" class="block text-sm font-medium text-gray-700">Current Age</label>
                            <input type="number" id="current-age" value="30" class="input-field mt-1 block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <div>
                            <label for="retirement-age" class="block text-sm font-medium text-gray-700">Retirement Age</label>
                            <input type="number" id="retirement-age" value="60" class="input-field mt-1 block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <div>
                            <label for="monthly-expenses" class="block text-sm font-medium text-gray-700">Current Monthly Expenses (₹)</label>
                            <input type="number" id="monthly-expenses" value="50000" class="input-field mt-1 block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                         <div>
                            <label for="current-savings" class="block text-sm font-medium text-gray-700">Current Retirement Savings (₹)</label>
                            <input type="number" id="current-savings" value="500000" class="input-field mt-1 block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <div>
                            <label for="monthly-investment" class="block text-sm font-medium text-gray-700">Monthly Investment (SIP) (₹)</label>
                            <input type="number" id="monthly-investment" value="15000" class="input-field mt-1 block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                    </div>
                     <h3 class="text-xl font-bold text-gray-700 my-6">Assumptions</h3>
                      <div class="space-y-4">
                         <div>
                            <label for="return-pre" class="block text-sm font-medium text-gray-700">Return Rate (Pre-Retirement) (%)</label>
                            <input type="number" id="return-pre" value="12" class="input-field mt-1 block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                         <div>
                            <label for="return-post" class="block text-sm font-medium text-gray-700">Return Rate (Post-Retirement) (%)</label>
                            <input type="number" id="return-post" value="7" class="input-field mt-1 block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                        <div>
                            <label for="inflation" class="block text-sm font-medium text-gray-700">Inflation Rate (%)</label>
                            <input type="number" id="inflation" value="6" class="input-field mt-1 block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                         <div>
                            <label for="life-expectancy" class="block text-sm font-medium text-gray-700">Life Expectancy (Years)</label>
                            <input type="number" id="life-expectancy" value="85" class="input-field mt-1 block w-full p-2 border border-gray-300 rounded-md">
                        </div>
                      </div>
                </div>

                <!-- Results -->
                <div class="lg:col-span-2">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 text-center">
                        <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                            <p class="text-sm text-gray-600">You need to accumulate</p>
                            <p id="required-corpus" class="text-3xl font-bold text-blue-800">₹0</p>
                        </div>
                        <div class="p-4 bg-green-100 rounded-lg border border-green-200">
                            <p class="text-sm text-gray-600">You will accumulate</p>
                            <p id="projected-corpus" class="text-3xl font-bold text-green-800">₹0</p>
                        </div>
                         <div id="shortfall-surplus-card" class="p-4 rounded-lg col-span-full">
                            <p class="text-sm" id="shortfall-surplus-label">Shortfall / Surplus</p>
                            <p id="shortfall-surplus" class="text-4xl font-bold">₹0</p>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <canvas id="retirement-chart"></canvas>
                    </div>
                </div>
              </div>
            </div>
        </div>
    </main>

    <!-- SEO-Friendly Article -->
    <div class="article-section">
      <h2>The Ultimate Guide to Retirement Planning with a Calculator</h2>
      <p>Retirement planning is one of the most critical financial journeys of our lives. The goal is to build a large enough financial cushion—a "corpus"—that can support your lifestyle after you stop working, even with rising costs due to inflation. But how much is enough? And are your current savings and investments on track? A <strong>retirement calculator</strong> is an essential tool that answers these complex questions, transforming abstract financial goals into a concrete, actionable plan. This guide will explain the key variables in retirement planning and show you how to use our powerful <strong>pension calculator</strong> to map out your financial future.</p>
    
      <h3>How to Use Our Advanced Retirement Calculator</h3>
      <p>Our tool is designed to provide a comprehensive and realistic retirement forecast.</p>
      <ol>
          <li><strong>Enter Your Personal Details:</strong> Input your `Current Age`, your desired `Retirement Age`, and your `Current Monthly Expenses`. This forms the baseline for the calculation.</li>
          <li><strong>Input Your Financials:</strong> Enter your `Current Retirement Savings` (any existing investments like EPF, PPF, Mutual Funds) and the `Monthly Investment (SIP)` you plan to make until retirement.</li>
          <li><strong>Set Your Assumptions:</strong> This is a crucial step for a realistic projection.
            <ul>
                <li><strong>Return Rate (Pre-Retirement):</strong> The average annual return you expect on your investments *while you are working*. Equity-heavy portfolios might aim for 10-12%.</li>
                <li><strong>Return Rate (Post-Retirement):</strong> The return you expect on your corpus *after you retire*. This should be a safer, more conservative rate (e.g., 6-7%) as you will be withdrawing from it.</li>
                <li><strong>Inflation Rate:</strong> The average annual rate at which the cost of living increases. 6% is a common assumption for India.</li>
                <li><strong>Life Expectancy:</strong> How long you expect to live post-retirement. 85-90 years is a safe estimate.</li>
            </ul>
          </li>
          <li><strong>Analyze Your Comprehensive Results:</strong> The tool instantly calculates and displays:
            <ul>
              <li><strong>Required Corpus:</strong> The total amount of money you will need on the day you retire to fund your post-retirement life.</li>
              <li><strong>Projected Corpus:</strong> The amount of money you are on track to accumulate based on your current savings and future investments.</li>
              <li><strong>Shortfall or Surplus:</strong> A clear, color-coded result showing if you are behind or ahead of your goal.</li>
              <li>A **line chart** that visually projects the growth of your investments over time, making the power of compounding tangible.</li>
            </ul>
          </li>
      </ol>
      
      <h3>Key Concepts in Retirement Planning</h3>
      <p>A good <strong>retirement planning calculator</strong> juggles several important financial concepts.</p>
      
      <h4>1. The Impact of Inflation</h4>
      <p>This is the most overlooked but most important factor. Inflation is the rate at which the general level of prices for goods and services is rising, and subsequently, purchasing power is falling. If your monthly expenses are ₹50,000 today, with 6% inflation, you will need approximately ₹2,87,000 per month to maintain the same lifestyle in 30 years. Our calculator uses this to determine your true financial need at retirement.</p>

      <h4>2. The 4% Withdrawal Rule (A Guideline)</h4>
      <p>A common rule of thumb in financial planning is the 4% rule. It suggests that you can safely withdraw 4% of your retirement corpus in the first year of retirement, and then adjust that amount for inflation each subsequent year, with a high probability that your money will last for 30 years. Our calculator uses a more dynamic formula but is based on this same principle of safe withdrawal rates.</p>

      <h4>3. Pre- and Post-Retirement Returns</h4>
      <p>It's crucial to use different return assumptions for your accumulation phase (pre-retirement) and withdrawal phase (post-retirement).
        <ul>
            <li><strong>Pre-Retirement:</strong> You have a long time horizon, so you can afford to take more risks with equity-oriented investments for higher potential returns (e.g., 12%).</li>
            <li><strong>Post-Retirement:</strong> Your priority shifts from growth to capital preservation. You'll move your corpus into safer, less volatile assets like debt funds or fixed deposits, which offer lower returns (e.g., 7%).</li>
        </ul>
      Our calculator allows you to set both rates for a more realistic projection.</p>

      <h3>Frequently Asked Questions (FAQ)</h3>
      
      <h4>How much corpus do I need to retire?</h4>
      <p>This is a highly personal question that depends on your lifestyle, expenses, and desired retirement age. Our <strong>retirement corpus calculator</strong> is the best way to get a personalized answer. A common rule of thumb is to aim for a corpus that is at least 25 to 30 times your expected annual expenses at the time of retirement.</p>
      
      <h4>Is it too late to start planning for retirement?</h4>
      <p>No, it's never too late to start, but the earlier you begin, the more the power of compounding works in your favor. Even small, regular investments started early can grow into a substantial sum over time. Use the calculator to see how different monthly investment amounts can impact your final corpus.</p>
      
      <h4>What is a good rate of return to expect?</h4>
      <p>This depends on where you invest. Historically, diversified equity mutual funds in India have delivered long-term average returns of 12-15%. Debt instruments like PPF or fixed deposits offer lower but more stable returns, typically in the 7-8% range. A balanced portfolio might average around 10%.</p>

      <h3>Conclusion</h3>
      <p>Retirement planning can seem daunting, but it doesn't have to be. By breaking it down into manageable inputs and providing clear, visual results, our <strong>Retirement Calculator</strong> demystifies the process. It acts as your personal financial planner, showing you not just where you need to be, but also whether your current path will get you there. Use this tool to set clear goals, stay motivated, and build a secure and comfortable future for your golden years.</p>
    </div>
    
    <!-- FOOTER -->
    <footer class="bg-gray-100"><!-- Footer content --></footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Inputs
        const allInputs = document.querySelectorAll('.input-field');
        const clearBtn = document.getElementById('clear-btn');
        
        // Results
        const requiredCorpusEl = document.getElementById('required-corpus');
        const projectedCorpusEl = document.getElementById('projected-corpus');
        const shortfallSurplusEl = document.getElementById('shortfall-surplus');
        const shortfallSurplusLabelEl = document.getElementById('shortfall-surplus-label');
        const shortfallSurplusCard = document.getElementById('shortfall-surplus-card');
        
        // Chart
        const chartCanvas = document.getElementById('retirement-chart');
        let retirementChart;

        const formatCurrency = (value) => {
            return value.toLocaleString('en-IN', { style: 'currency', currency: 'INR', maximumFractionDigits: 0 });
        };

        const calculate = () => {
            const currentAge = parseInt(document.getElementById('current-age').value) || 0;
            const retirementAge = parseInt(document.getElementById('retirement-age').value) || 0;
            const monthlyExpenses = parseFloat(document.getElementById('monthly-expenses').value) || 0;
            const currentSavings = parseFloat(document.getElementById('current-savings').value) || 0;
            const monthlyInvestment = parseFloat(document.getElementById('monthly-investment').value) || 0;
            const preRetirementRate = (parseFloat(document.getElementById('return-pre').value) || 0) / 100;
            const postRetirementRate = (parseFloat(document.getElementById('return-post').value) || 0) / 100;
            const inflationRate = (parseFloat(document.getElementById('inflation').value) || 0) / 100;
            const lifeExpectancy = parseInt(document.getElementById('life-expectancy').value) || 0;

            if (currentAge >= retirementAge || retirementAge >= lifeExpectancy) {
                return;
            }

            const yearsToRetirement = retirementAge - currentAge;
            const futureMonthlyExpenses = monthlyExpenses * Math.pow(1 + inflationRate, yearsToRetirement);
            const retirementYears = lifeExpectancy - retirementAge;
            
            const realReturnRatePostRetirement = ((1 + postRetirementRate) / (1 + inflationRate)) - 1;
            
            let requiredCorpus = 0;
            if (realReturnRatePostRetirement !== 0) {
                requiredCorpus = ((futureMonthlyExpenses * 12) / realReturnRatePostRetirement) * (1 - (1 / Math.pow(1 + realReturnRatePostRetirement, retirementYears)));
            } else {
                requiredCorpus = (futureMonthlyExpenses * 12) * retirementYears;
            }
            requiredCorpusEl.textContent = formatCurrency(requiredCorpus);

            const n = yearsToRetirement * 12;
            const monthlyPreRetirementRate = preRetirementRate / 12;
            const fvOfCurrentSavings = currentSavings * Math.pow(1 + preRetirementRate, yearsToRetirement);
            const fvOfSips = monthlyInvestment * ((Math.pow(1 + monthlyPreRetirementRate, n) - 1) / monthlyPreRetirementRate);
            
            const projectedCorpus = fvOfCurrentSavings + fvOfSips;
            projectedCorpusEl.textContent = formatCurrency(projectedCorpus);
            
            const difference = projectedCorpus - requiredCorpus;
            shortfallSurplusEl.textContent = formatCurrency(Math.abs(difference));
            
            shortfallSurplusCard.classList.remove('bg-red-100', 'text-red-800', 'bg-green-100', 'text-green-800');
            if (difference < 0) {
                shortfallSurplusLabelEl.textContent = "Shortfall";
                shortfallSurplusCard.classList.add('bg-red-100', 'text-red-800');
            } else {
                shortfallSurplusLabelEl.textContent = "Surplus";
                shortfallSurplusCard.classList.add('bg-green-100', 'text-green-800');
            }
            
            updateChart(yearsToRetirement, currentSavings, monthlyInvestment, preRetirementRate);
        };
        
        const updateChart = (yearsToRetirement, P, M, r) => {
            const labels = Array.from({length: yearsToRetirement + 1}, (_, i) => `Year ${i}`);
            const data = [];
            let balance = P;

            for(let i=0; i <= yearsToRetirement; i++){
                data.push(balance);
                balance = (balance * (1 + r)) + (M * 12);
            }

            const chartData = {
                labels: labels,
                datasets: [{
                    label: 'Projected Investment Growth',
                    data: data,
                    borderColor: '#4f46e5',
                    backgroundColor: 'rgba(79, 70, 229, 0.1)',
                    fill: true,
                    tension: 0.1
                }]
            };

            if (retirementChart) {
                retirementChart.data = chartData;
                retirementChart.update();
            } else {
                retirementChart = new Chart(chartCanvas, {
                    type: 'line',
                    data: chartData,
                    options: {
                        responsive: true,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: { ticks: { callback: value => formatCurrency(value) } }
                        }
                    }
                });
            }
        };
        
        const clearAll = () => {
            document.querySelectorAll('.input-field').forEach(input => {
                if(input.id === 'current-age') input.value = '30';
                else if(input.id === 'retirement-age') input.value = '60';
                else if(input.id === 'monthly-expenses') input.value = '50000';
                else if(input.id === 'current-savings') input.value = '500000';
                else if(input.id === 'monthly-investment') input.value = '15000';
                else if(input.id === 'return-pre') input.value = '12';
                else if(input.id === 'return-post') input.value = '7';
                else if(input.id === 'inflation') input.value = '6';
                else if(input.id === 'life-expectancy') input.value = '85';
                else input.value = '';
            });
            calculate();
        };

        allInputs.forEach(input => {
            input.addEventListener('input', calculate);
        });
        
        clearBtn.addEventListener('click', clearAll);

        calculate();
      });
    </script>
</body>
</html>